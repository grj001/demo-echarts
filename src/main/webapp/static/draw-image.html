<!DOCTYPE html>
<html style="height: 100%">
<head>
    <meta charset="utf-8">
</head>
<body style="height: 100%; margin: 0">
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts.min.js"></script>

    <canvas id="outputOncePersion" width="800px" height="600px"></canvas>

    <script type="text/javascript">
        let canvas = document.getElementById("outputOncePersion");
        /*let myChart = echarts.init(canvas);
        let app = {};

        let nowDate = new Date();
        let nowDateStr = nowDate.getFullYear()+"-"+nowDate.getMonth()+"-"+nowDate.getDay()+" ";
        let avg = [80,80,80,80,80,80,80,80,80,80];
        let output = [11.0, 151.0, 121.0, 50.0, 146.0, 121.0, 176.0, 172.0, 171.0, 142.0, 172.0, 22.0, 189.0, 206.0, 156.0, 169.0, 160.0];
        let xData = ["崔裕胜", "丁玲玲", "方少银", "丰士豪", "胡林", "黄天芬", "姜表七", "决婷婷", "刘博文", "罗艳", "彭锋", "王贵潘", "王艳涛", " 向美羽", "谢实付", "杨平", "赵慧丽"];

        let option = null;
        option = {
            title: {
                text: nowDateStr+'智能工厂产量完成情况',
                left: 'center',
                textStyle: {
                    color: 'black',//文字颜色
                    fontStyle: 'normal',//字体风格,'normal','italic','oblique'
                    fontWeight: 'bold',//字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                    fontFamily: 'sans-serif', //字体系列
                    //字体大小
                    fontSize: 30
                }
            },
            xAxis: {
                type: 'category',
                data: xData,
            },
            yAxis: {
                type: 'value'
            },
            series: [
                {
                    type: 'line',
                    data: avg
                },
                {
                    data: output,
                    type: 'bar',
                    label: {
                        show: true, //开启显示
                        position: 'top', //在上方显示
                        textStyle: { //数值样式
                            color: 'black',
                            fontSize: 16,
                            fontWeight: 600
                        }
                    },
                    barCategoryGap: '30%',
                    itemStyle:{
                        color: function (param) {
                            let data = param.data;
                            if(parseFloat(data) < parseFloat(avg)){
                                return "red";
                            }else{
                                return 'green';
                            }
                        }
                    }
                }
            ]
        };

        if (option && typeof option === "object") {
            myChart.setOption(option, true);
        }*/


        let ctx = canvas.getContext('2d');


        function loadImage(url, callback) {
            //创建一个Image对象，
            var img = new Image();
            img.src = url;
            // 如果图片已经存在于浏览器缓存，直接调用回调函数
            if (img.complete) {
                callback.call(img);
                return;
            }
            //图片下载完毕时异步调用callback函数。
            img.onload = function() {
                //将回调函数的this替换为Image对象
                callback.call(img);
            };
        }
        loadImage('/image/coolface.png', function() {
            //this就是图片对象
            //img,sx,sy,swidth,sheight,x,y,width,height
            ctx.drawImage(this, 0, 0, this.width, this.height, 0, 0, this.width, this.height);
            ctx.drawImage(this, 0, 0, this.width/2, this.height/2, this.width, this.height, this.width/2, this.height/2);
        });



    </script>
</body>
</html>